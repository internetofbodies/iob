<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WBAN Area Monitor</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
      integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <div class="navbar">
      <div class="logo">
        <a href="portal.html">
          <img src="logo.png" alt="IOB logo" />
        </a>
      </div>
      <!--Menu links-->
      <ul class="links">
        <li><a href="home.html">Health Dashboard</a></li>
        <!-- Mega Menu -->
        <li class="mega-menu-container">
          <a href="#" class="mega-menu-link">Features Section</a>
          <div class="mega-menu">
            <h4>Features Section</h4>
            <a href="citytracker.html">City Tracker</a>
            <a href="prediction.html">Prediction</a>
            <a href="healthsync.html">HealthSync Alert</a>
          </div>
        </li>
        <!-- Mega Menu -->
        <li class="mega-menu-container">
          <a href="#" class="mega-menu-link">Map Tools</a>
          <div class="mega-menu">
            <h4>Map Tools</h4>
            <a href="mobiledemo.html">Multi-Location Map</a>
            <a href="humanlocation.html">Human Locator Map</a>
            <a href="animalvaccination.html">Animals Locator Map</a>
            <a href="iobmap.html">Internet of Bodies Map</a>
            <a href="location.html">Location Surveillance Map</a>
            <a href="livegps.html">Live ID Map</a>
            <a href="wban.html">WBAN Monitoring Map</a>
          </div>
        </li>
      </ul>

      <a href="index.html" class="action_btn">Logout</a>
      <div class="toggle_btn">
        <i class="fa-solid fa-bars"></i>
      </div>
    </div>

    <!--Dropdown Mobile-->
    <div class="dropdown_menu">
      <ul>
        <li><a href="home.html">Health Dashboard</a></li>
        <li><a href="citytracker.html">CityBaron Tracker</a></li>
        <li><a href="prediction.html">Prediction</a></li>
        <li><a href="healthsync.html">HealthSync Alert</a></li>
        <!-- Dropdown for Maps -->
        <li class="dropdown">
          <a href="#">Maps ▼</a>
          <ul class="dropdown__menu">
            <li><a href="mobiledemo.html">Multi-Location Map</a></li>
            <li><a href="humanlocation.html">Human Locator Map</a></li>
            <li><a href="animalvaccination.html">Animals Locator Map</a></li>
            <li><a href="location.html">Location Surveillance Map</a></li>
            <li><a href="iobmap.html">Internet of Bodies Map</a></li>
            <li><a href="livegps.html">Live ID Map</a></li>
            <li><a href="wban.html">WBAN Monitoring Map</a></li>
          </ul>
        </li>
        <li>
          <a href="index.html" class="action_btn">Logout</a>
        </li>
      </ul>
    </div>
  </head>
  <style>
    /* General Reset for Overflow Prevention */

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      background-color: #f9f9f9;
      overflow-x: hidden; /* Prevent horizontal scrolling */
    }

    *,
    *::before,
    *::after {
      box-sizing: inherit;
    }

    /* Header */
    h1 {
      margin: 0;
      font-size: 2rem;
      font-weight: bold;
      color: #333;
      text-align: center;
      padding: 1rem;
    }

    /* Dashboard Layout */
    .dashboard {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 1.5rem;
      padding: 1rem;
      max-width: 1200px;
      margin: auto;
      width: 100%;
    }

    /* Map Section */
    .map-section {
      grid-column: span 2;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      padding: 1rem;
      width: 100%;
    }

    .map-section h2 {
      margin-bottom: 0.5rem;
      font-size: 1.25rem;
      color: #333;
      font-weight: bold;
    }

    #map {
      height: 400px;
      width: 100%;
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    /* Panels */
    .panel {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      padding: 1rem;
      width: 100%;
    }

    .panel h3 {
      margin: 0 0 1rem;
      font-size: 1.25rem;
      font-weight: bold;
      color: #333;
    }

    /* Alerts */
    .alert {
      padding: 0.75rem;
      border-radius: 5px;
      background-color: #fffbee;
      border: 1px solid #ffc107;
      width: 100%;
    }

    /* Device Status */
    .devices-status-container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: space-between;
    }

    .devices-status-list p {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* Responsive Images */
    img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
    }

    /* Table Styles */
    table {
      width: 100%;
      border-collapse: collapse;
    }

    th,
    td {
      text-align: left;
      padding: 8px;
      border: 1px solid #ddd;
    }

    th {
      background-color: #333;
      color: #fff;
    }

    /* Media Queries */
    @media (max-width: 768px) {
      .dashboard {
        grid-template-columns: 1fr;
        padding: 0.5rem;
        gap: 1rem;
      }

      .map-section {
        grid-column: span 1;
      }

      #map {
        height: 300px;
      }

      .alert {
        font-size: 0.9rem;
        padding: 0.5rem;
      }

      .devices-status-list p {
        flex-direction: column;
        align-items: flex-start;
      }

      .panel h3 {
        font-size: 1rem;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 1.5rem;
      }

      .map-section h2,
      .panel h3 {
        font-size: 1rem;
      }

      #map {
        height: 250px;
      }

      .alert {
        font-size: 0.85rem;
      }

      th,
      td {
        font-size: 0.85rem;
        padding: 4px;
      }

      table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }

      .dashboard {
        padding: 0.5rem;
      }

      .password-box {
        width: 90%;
      }
    }

    .password-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000; /* Solid black */
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .password-box {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    .password-box input {
      padding: 10px 0;
      font-size: 1rem;
      margin: 8px 0;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button {
      background-color: #000;
      color: #fff;
      border: none;
      padding: 10px 20px;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    button:hover {
      background-color: #000000;
    }

    /* Mega Menu Container */
    .mega-menu-container {
      position: relative; /* Required for absolute positioning of the mega menu */
    }

    /* Mega Menu Link */
    .mega-menu-link {
      position: relative;
      color: #000; /* Black text */
      font-weight: normal;
      transition: color 0.3s ease;
    }

    .mega-menu-link:hover {
      color: #555; /* Light gray on hover */
    }

    /* Mega Menu Content */
    .mega-menu {
      display: none; /* Hidden by default */
      position: absolute;
      top: 100%; /* Position below the parent link */
      left: 0;
      background-color: #fff; /* White background */
      color: #000; /* Black text */
      width: 200px; /* Adjust width as needed */
      padding: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      border: 1px solid #000; /* Black border */
      border-radius: 5px;
      z-index: 1000;
    }

    .mega-menu-container:hover .mega-menu {
      display: block; /* Show on hover */
    }

    .mega-menu h4 {
      font-size: 1.2rem;
      margin-bottom: 10px;
      font-weight: bold;
      color: #000; /* Black heading */
    }

    .mega-menu a {
      display: block;
      padding: 5px 0;
      font-size: 1rem;
      color: #000; /* Black links */
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .mega-menu a:hover {
      color: #555; /* Light gray on hover */
    }

    li {
      list-style: none;
    }

    a {
      text-decoration: none;
      color: #000; /* Changed to black */
      font-size: 1rem;
    }

    a:hover {
      color: #555; /* Changed to a lighter black (gray) */
    }

    /* HEADER */
    header {
      position: relative;
      padding: 0 2rem;
    }

    .navbar {
      width: 100%;
      height: 60px;
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .navbar .logo a {
      font-size: 1.5rem;
      font-weight: bold;
      color: #000; /* Changed to black */
    }

    .navbar .links {
      display: flex;
      gap: 2rem;
    }

    .navbar .toggle_btn {
      color: #000; /* Changed to black */
      font-size: 1.5rem;
      cursor: pointer;
      display: none;
    }

    .action_btn {
      background-color: #000; /* Changed to black */
      color: #fff; /* Kept white text for contrast */
      padding: 0.5rem 1rem;
      border: none;
      outline: none;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
      cursor: pointer;
      transition: scale 0.2 ease;
    }

    .action_btn:hover {
      scale: 1.05;
      color: #fff; /* Kept white text */
    }
    a.action_btn {
      background-color: #000; /* Changed to black */
      color: #fff !important; /* Kept white text for contrast */
      padding: 0.5rem 1rem;
      border: none;
      outline: none;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
      cursor: pointer;
      transition: scale 0.2 ease;
    }

    .action_btn:active {
      scale: 0.95;
    }
    .logo img {
      height: 50px;
      width: auto;
      display: block;
    }

    /* RESPONSIVE DESIGN */
    @media (max-width: 992px) {
      .navbar .links,
      .navbar .action_btn {
        display: none;
      }

      .navbar .toggle_btn {
        display: block;
      }
    }
    /* Dropdown Menu */
    .dropdown_menu {
      display: none;
      position: absolute;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-width: 400px;
      background: rgba(255, 255, 255, 0.981);
      backdrop-filter: blur(15px);
      border: 1px solid black; /* Add black border */
      border-radius: 10px;
      z-index: 10000;
      overflow-y: auto;
      max-height: 90vh;
    }

    .dropdown_menu.open {
      display: block;
    }

    .dropdown_menu li {
      text-align: center;
      padding: 0.7rem;
    }

    .dropdown_menu li a {
      color: #000;
      text-decoration: none;
      display: block;
    }

    .dropdown_menu li a:hover {
      color: #000;
    }

    /* Centered Submenu with Transparent Background */
    .dropdown {
      position: relative;
    }

    .dropdown__menu {
      display: none;
      position: relative;
      left: 50%;
      transform: translateX(-50%); /* Center Submenu */
      background: rgba(255, 255, 255, 0.981);
      backdrop-filter: blur(15px);
      border-radius: 5px;
      margin-top: 0.5rem;
      width: 90%; /* Responsive width */
      box-shadow: 0 2px 5px rgba(255, 255, 255, 0.981);
    }

    .dropdown.open .dropdown__menu {
      display: block;
    }

    .dropdown__menu li {
      padding: 0.5rem 1rem;
      text-align: center;
    }

    .dropdown__menu li a {
      color: #000;
      font-size: 14px;
      text-decoration: none;
    }

    .dropdown__menu li a:hover {
      background-color: rgba(0, 0, 0, 0.05);
      color: #000;
    }

    /* Responsive Fix */
    @media (max-width: 768px) {
      .dropdown_menu {
        width: 95%;
        left: 50%;
        transform: translateX(-50%);
        border: 1px solid black; /* Ensure border remains for small screens */
      }

      .dropdown__menu {
        width: 90%; /* Submenu stays within parent */
      }
    }

    .fa-bars,
    .fa-navicon {
      padding: 20px;
    }
    .fa-close,
    .fa-multiply,
    .fa-remove,
    .fa-times,
    .fa-xmark {
      padding: 20px;
    }
  </style>

  <body>
    <div class="password-container" id="passwordContainer">
      <div class="password-box">
        <h2>Enter Password</h2>
        <input type="password" id="pagePassword" placeholder="Enter password" />
        <button onclick="validatePassword()">Submit</button>
      </div>
    </div>
    <h1>WBAN Map</h1>
    <div class="dashboard">
      <div class="map-section">
        <h2>Current Area: USA - Mexico Border</h2>
        <div id="map"></div>
      </div>
      <div class="panel activity-tracker">
        <h3>Device Live Activity Tracker</h3>
        <img src="track.png" alt="Live activity heat map" />
        <p><strong>Location:</strong> Janos Municipality, Chihuahua, Mexico</p>
        <p><strong>Coordinates:</strong> 31.329038, -108.756436</p>
        <p><strong>Devices Detected:</strong> 4</p>
        <p>
          <span class="status-label"
            ><span class="status-dot status-active"></span> Active: 1</span
          >
        </p>
        <p>
          <span class="status-label"
            ><span class="status-dot status-malfunctioning"></span>
            Malfunctioning: 2</span
          >
        </p>
        <p>
          <span class="status-label"
            ><span class="status-dot status-inactive"></span> Inactive: 1</span
          >
        </p>
      </div>
      <div class="panel">
        <h3>Area Devices Status</h3>
        <div class="devices-status-container">
          <div class="devices-status-list">
            <p>
              <span class="status-label"
                ><span class="status-dot status-active"></span> Active</span
              >
              <strong>920,000</strong>
            </p>
            <p>
              <span class="status-label"
                ><span class="status-dot status-malfunctioning"></span>
                Malfunctioning</span
              >
              <strong>50,000</strong>
            </p>
            <p>
              <span class="status-label"
                ><span class="status-dot status-inactive"></span> Inactive</span
              >
              <strong>30,000</strong>
            </p>
          </div>
          <canvas id="devicePieChart"></canvas>
        </div>
      </div>
      <div class="panel">
        <h3>Area Live Alerts</h3>
        <div class="alerts-container">
          <div class="alert">
            Monitor sudden increase in Malfunctioning (1.01%) and Inactive
            (1.69%) devices over the past hour.
          </div>
          <div class="alert">
            System has detected multiple device disconnections and malfunctions
            in a weak signal area.
          </div>
          <div class="alert">
            Detected activity from an inactive device in Janos Municipality 24.4
            kilometers from the US-Mexico border.
          </div>
        </div>
      </div>
    </div>
    <!-- Tunneling Section -->
    <div class="tunneling-section">
      <h2>Tunneling</h2>
      <div class="network-status-container">
        <div class="network-status">
          <h3>Network and Tunnel Status</h3>
          <table>
            <thead>
              <tr>
                <th>Metric</th>
                <th>Value</th>
                <th>Status</th>
                <th>Details</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Active WBANs</td>
                <td>78 BPM</td>
                <td>✅ Normal</td>
                <td>Monitoring WBAN devices citywide.</td>
              </tr>
              <tr>
                <td>Secure Tunnels</td>
                <td>97%</td>
                <td>⚠️ Warning</td>
                <td>3% of tunnels disrupted near the border.</td>
              </tr>
              <tr>
                <td>Data Packet Loss</td>
                <td>5%</td>
                <td>⚠️ Elevated</td>
                <td>Increased packet loss in Zone E (border area).</td>
              </tr>
              <tr>
                <td>Latency (avg)</td>
                <td>2.5 seconds</td>
                <td>⚠️ Degraded</td>
                <td>Latency spike detected in disrupted zones.</td>
              </tr>
              <tr>
                <td>Network Uptime</td>
                <td>98.5%</td>
                <td>✅ Stable</td>
                <td>Overall network remains operational.</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="tunneling-alerts">
          <h3>Tunneling Live Alerts</h3>
          <div class="alert">
            <strong>🚨 TUNNEL SECURITY ALERT:</strong> Intrusion Attempt
            Detected
            <p>
              <strong>Time:</strong> 12:43 PM, Dec 9, 2024<br />
              <strong>Location:</strong> Mexico-US Border, Zone E<br />
              <strong>Description:</strong> An unauthorized attempt to access
              and disrupt WBAN data tunnels was detected.
            </p>
            <p>
              <strong>Impact:</strong>
            </p>

            <ul>
              <li>5 tunnels affected.</li>
              <li>Increased latency in Zone E.</li>
              <li>Potential packet loss of up to 8%.</li>
            </ul>

            <p>
              <strong>Action Required:</strong>
            </p>

            <ul>
              <li>Investigate source of intrusion.</li>
              <li>Ensure encryption protocols are reinforced.</li>
              <li>Isolate affected tunnels for further analysis.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Initialize Map
      const map = L.map("map").setView([31.329038, -108.756436], 6);

      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
      }).addTo(map);

      // Add markers
      L.marker([31.329038, -108.756436]).addTo(map).bindPopup("Sample Marker");

      // Pie Chart
      const ctx = document.getElementById("devicePieChart").getContext("2d");
      new Chart(ctx, {
        type: "doughnut",
        data: {
          labels: ["Active", "Malfunctioning", "Inactive"],
          datasets: [
            {
              data: [92, 5, 3],
              backgroundColor: ["#4CAF50", "#FFC107", "#F44336"],
            },
          ],
        },
        options: {
          plugins: {
            legend: {
              display: false,
            },
          },
        },
      });

      // Adjust Map Height Dynamically
      const adjustMapHeight = () => {
        const map = document.getElementById("map");
        map.style.height = window.innerWidth < 768 ? "250px" : "400px";
      };

      window.addEventListener("resize", adjustMapHeight);
      adjustMapHeight();

      // Password Validation
      const correctPassword = "admin";
      const passwordContainer = document.getElementById("passwordContainer");
      function validatePassword() {
        const enteredPassword = document.getElementById("pagePassword").value;
        if (enteredPassword === correctPassword) {
          passwordContainer.style.display = "none";
        } else {
          alert("Incorrect password. Please try again.");
        }
      }
    </script>

    <script>
      // Ensure DOM is fully loaded
      document.addEventListener("DOMContentLoaded", function () {
        const toggleBtn = document.querySelector(".toggle_btn");
        const toggleBtnIcon = document.querySelector(".toggle_btn i");
        const dropdownMenu = document.querySelector(".dropdown_menu");
        const submenuLinks = document.querySelectorAll(".dropdown > a");

        // Toggle Dropdown Menu
        if (toggleBtn) {
          toggleBtn.addEventListener("click", function () {
            dropdownMenu.classList.toggle("open");

            const isOpen = dropdownMenu.classList.contains("open");
            toggleBtnIcon.classList = isOpen
              ? "fa-solid fa-xmark"
              : "fa-solid fa-bars";
          });
        }

        // Submenu Toggle for Maps
        submenuLinks.forEach((menuToggle) => {
          menuToggle.addEventListener("click", function (e) {
            e.preventDefault();
            const parent = this.parentElement;

            // Toggle submenu
            parent.classList.toggle("open");

            // Close other submenus
            document.querySelectorAll(".dropdown").forEach((item) => {
              if (item !== parent) {
                item.classList.remove("open");
              }
            });
          });
        });

        // Close Menu on Window Resize (Desktop View)
        window.addEventListener("resize", function () {
          if (window.innerWidth > 768) {
            dropdownMenu.classList.remove("open");
            if (toggleBtnIcon) {
              toggleBtnIcon.classList = "fa-solid fa-bars";
            }
          }
        });
      });
    </script>
  </body>
</html>
